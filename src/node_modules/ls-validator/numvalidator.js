var $ = require('jquery');
var BaseValidator = require('./basevalidator.js');

module.exports = class NumValidator extends BaseValidator {
	/*
	*  Validate numeric inputs.
	*
	*  Settings:
	*    * min = The minimum value.    (number)
	*    * max = The maximum value.    (number)
	*    * nan = Allow NaN values.     (boolean)
	*    * float = Allow float values. (boolean)
	*/
	constructor(...args) {
		super(...args);
		this.chk_settings(['min', 'max', 'nan', 'float']);
	}

	validate(element) {
		let val = null;
		let {min, max, nan, float} = this.settings;

		if (float) {
			val = parseFloat(element.value);
		} else {
			if (element.value.indexOf('.') != -1) {
				return false;
			} else {
				val = parseInt(element.value, 10);
			}
		}

		if (isNaN(val) && !nan) {
			return false;
		} else if (isNaN(val) && nan) {
			return true;
		}

		return (min == null || val >= min) && (max == null || val <= max);
	}
}
