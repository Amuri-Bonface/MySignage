var $ = require('jquery');
var BaseValidator = require('./basevalidator.js');

module.exports = class StrValidator extends BaseValidator {
	/*
	*  Validate string inputs.
	*
	*  Settings:
	*    * min = The minimum length.    (integer)
	*    * max = The maximum length.    (integer)
	*    * regex = A "whitelist" regex. (regex)
	*/
	constructor(...args) {
		super(...args);
		this.chk_settings(['min', 'max', 'regex']);
	}

	validate(element) {
		let val = null;
		let a, b, c, tmp;
		let {min, max, regex} = this.settings;

		val = element.value;
		a = (min == null || val.length >= min);
		b = (max == null || val.length <= max);

		if (regex == null) {
			c = true;
		} else {
			tmp = val.match(regex);
			c = (tmp && tmp[0].length == val.length);
		}
		return a && b && c;
	}
}
