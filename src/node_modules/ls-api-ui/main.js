var APIError = require('ls-api').APIError;
var dialog = require('ls-dialog');

exports.handle_error = function(e) {
	if (e === null) { return; }
	if (!(e instanceof APIError)) { throw e; }
	if (e.get_code() in APIError.messages) {
		dialog.dialog(
			dialog.TYPE.ALERT,
			APIError.messages[e.get_code()].short,
			APIError.messages[e.get_code()].long + ` (${e.get_err_msg()})`
		);
	} else {
		if (e.get_err_msg() != 'Unknown') {
			dialog.dialog(
				dialog.TYPE.ALERT,
				'An error occured',
				e.get_err_msg()
			);
		} else {
			dialog.dialog(
				dialog.TYPE.ALERT,
				'An unknown error occured',
				'The server encountered an unknown error.'
			);
		}
	}
	console.error(e.toString());
}
