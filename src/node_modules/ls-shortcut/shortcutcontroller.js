var $ = require('jquery');

module.exports = class ShortcutController {
	/*
	*  Main ShortcutController class that holds information
	*  of all the defined shortcuts and handles running the
	*  attached callback functions.
	*
	*  shortcuts = A list of Shortcut objects to use.
	*/
	constructor(shortcuts) {
		this.shortcuts = shortcuts;
		this.down = [];

		$(document).on('keydown', (e) => {
			this.down.push(e.key);
			for (let s of this.shortcuts) {
				if (s.matches(this.down)) {
					e.preventDefault();
					s.exec();
				}
			}
		});

		$(document).on('keyup', (e) => {
			this.down.splice(this.down.indexOf(e.key), 1);
		});
	}

	reg(shortcut) {
		// Register a new shortcut.
		this.shortcuts.push(shortcut);
	}
}
